"""
AI prompts configuration for the AI Bot
"""
from typing import Dict, Any


class PromptManager:
    """Manager for AI prompts with methods to get specific prompts"""
    
    def __init__(self):
        self._prompts = self._initialize_prompts()
    
    def _initialize_prompts(self) -> Dict[str, str]:
        """Initialize all prompts"""
        return {
            'analyze': self._get_analyze_prompt(),
            'format': self._get_format_prompt(),
            'ingredient_matching': self._get_ingredient_matching_prompt()
        }
    
    def get_analyze_prompt(self) -> str:
        """Get the receipt analysis prompt"""
        return self._prompts['analyze']
    
    def get_format_prompt(self) -> str:
        """Get the receipt formatting prompt"""
        return self._prompts['format']
    
    def get_ingredient_matching_prompt(self) -> str:
        """Get the ingredient matching prompt"""
        return self._prompts['ingredient_matching']
    
    def _get_analyze_prompt(self) -> str:
        """Receipt analysis prompt for extracting data from receipt images"""
        return """
–ò–∑–≤–ª–µ–∫–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —á–µ–∫–∞ –≤ JSON. –ö–û–ü–ò–†–£–ô –¢–û–ß–ù–û - –Ω–µ –≤—ã—á–∏—Å–ª—è–π.

–ü–†–ê–í–ò–õ–ê:
- –ü—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ ‚Üí null
- –ù–µ—á–∏—Ç–∞–µ–º–æ ‚Üí "???"
- –ò–Ω–¥–æ–Ω–µ–∑–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è ‚Üí –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (—Å–æ—Ö—Ä–∞–Ω–∏ –µ–¥–∏–Ω–∏—Ü—ã: –∫–≥,–≥,–ª,–º–ª)
- –ß–∏—Å–ª–∞ –≤ JSON: 125000 (–Ω–µ 125 000)

–û–°–û–ë–û–ï –ü–†–ê–í–ò–õ–û –î–õ–Ø –ù–ï–û–ü–û–ó–ù–ê–ù–ù–´–• –ü–†–û–î–£–ö–¢–û–í:
- –ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –∫–∞–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –Ω–∞–π–¥–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ
- –ü–æ—Å–ª–µ –Ω–∞–∑–≤–∞–Ω–∏—è –±—Ä–µ–Ω–¥–∞ –≤ —Å–∫–æ–±–∫–∞—Ö —É–∫–∞–∂–∏ —á—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–¥—É–∫—Ç !–ù–ê –ê–ù–ì–õ–ò–ô–°–ö–û–ú –Ø–ó–´–ö–ï!  
- –ü—Ä–∏–º–µ—Ä: "Dine FF Crinkle" ‚Üí "Dine FF Crinkle (French Fries)"
- –ü—Ä–∏–º–µ—Ä: "Mama Tom Yam" ‚Üí "Mama Tom Yam (Instant Noodles)"

–°–¢–†–û–ö–ò:
1. –° —Ü–∏—Ñ—Ä–∞–º–∏: name(–∞–Ω–≥–ª–∏–π—Å–∫–∏–π+–µ–¥–∏–Ω–∏—Ü—ã), quantity, price, total, status
2. –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç: name(–∞–Ω–≥–ª–∏–π—Å–∫–∏–π), quantity=null, price=null, total=null, status="needs_review"  
3. –ù–µ—á–∏—Ç–∞–µ–º–æ: name="???", –æ—Å—Ç–∞–ª—å–Ω–æ–µ=null, status="needs_review"
4. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞: –ù–ï –≤–∫–ª—é—á–∞—Ç—å

JSON:
```json
{
  "items": [
    {
      "line_number": 1,
      "name": "–Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º",
      "quantity": —á–∏—Å–ª–æ_–∏–ª–∏_null,
      "price": —á–∏—Å–ª–æ_–∏–ª–∏_null,
      "total": —á–∏—Å–ª–æ_–∏–ª–∏_null,
      "status": "confirmed/error/needs_review"
    }
  ],
  "grand_total_text": "–∏—Ç–æ–≥–æ–≤–∞—è_—Å—É–º–º–∞"
}
```
"""
    
    def _get_format_prompt(self) -> str:
        """Receipt formatting prompt for displaying data in Telegram"""
        return """
–û—Ñ–æ—Ä–º–∏ –¥–∞–Ω–Ω—ã–µ —á–µ–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü—É –¥–ª—è Telegram (–º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç).

–ü–†–ê–í–ò–õ–ê:
- null ‚Üí –ø—É—Å—Ç–∞—è —è—á–µ–π–∫–∞ (–ø—Ä–æ–±–µ–ª—ã)
- –ù–ï –≤—ã—á–∏—Å–ª—è–π –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç —á–∏—Å–µ–ª: 125 000 (–ø—Ä–æ–±–µ–ª –¥–ª—è —Ç—ã—Å—è—á)

–¢–ê–ë–õ–ò–¶–ê:
‚Ññ| –¢–æ–≤–∞—Ä      |–ö–æ–ª | –¶–µ–Ω–∞      |    –°—É–º–º–∞ | 
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1| –ù–∞–∑–≤–∞–Ω–∏–µ   |–∫–æ–ª-–≤–æ| —Ü–µ–Ω–∞    |   —Å—É–º–º–∞  | ‚úÖ/üî¥/‚ö†Ô∏è

–°–¢–ê–¢–£–°–´:
- ‚úÖ: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å, —Ä–∞—Å—á–µ—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç
- üî¥: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å, —Ä–∞—Å—á–µ—Ç –ù–ï —Å–æ–≤–ø–∞–¥–∞–µ—Ç  
- ‚ö†Ô∏è: –µ—Å—Ç—å null –∑–Ω–∞—á–µ–Ω–∏—è

–ò–¢–û–ì: —Å—É–º–º–∞ –ø–æ –ø–æ–ª–Ω—ã–º –ø–æ–∑–∏—Ü–∏—è–º + —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å grand_total_text

–î–∞–Ω–Ω—ã–µ:
"""
    
    def _get_ingredient_matching_prompt(self) -> str:
        """Ingredient matching prompt for AI-assisted ingredient matching"""
        return """
–ü–æ–º–æ–≥–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∏–∑ —á–µ–∫–∞ —Å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–ó–ê–î–ê–ß–ê:
- –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ —á–µ–∫–∞ —Å –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–º –∏–∑ –±–∞–∑—ã
- –£—á–µ—Å—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã, –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –ø–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å –æ—Ü–µ–Ω–∫–æ–π —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

–ü–†–ê–í–ò–õ–ê:
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–æ—á–Ω—ã–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º –Ω–∞–∑–≤–∞–Ω–∏–π
- –£—á–∏—Ç—ã–≤–∞–π –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (–∫–≥, –≥, –ª, –º–ª)
- –ò–≥–Ω–æ—Ä–∏—Ä—É–π –±—Ä–µ–Ω–¥—ã –∏ –º–∞—Ä–∫–∏, —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ —Ç–∏–ø–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- –ü—Ä–µ–¥–ª–∞–≥–∞–π –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –æ—Ü–µ–Ω–∫–æ–π –æ—Ç 0 –¥–æ 100%

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:
```json
{
  "matches": [
    {
      "ingredient_name": "–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞",
      "ingredient_id": "ID_–∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞",
      "similarity_score": 85,
      "reason": "–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è"
    }
  ]
}
```

–î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:
"""
